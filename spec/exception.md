# 异常处理

## 说明
1. 处理项包括页面和API接口
1. 异常界面/提示的错误显示
    1. 前端显示返回码的值
    1. 非生产环境所有错误，需显示错误信息(message)
    1. 非生产环境系统错误(繁忙和失败)和系统异常(繁忙)，需显示错误详细信息(verbose)

## 返回码
### 范围
| 项 | 定义 | 说明 |
| :----: | ---- | ---- |
| 0 | 请求成功 |  |
| -1 | 系统繁忙 |  |
| 1-499 | 通用系统错误 |  |
| 500-999 | 通用业务错误 |  |
| 1000以上 | 自定义业务错误 | 业务系统自行定义使用 |

### 定义
| 分类 | 名称 | 编码 | 值 | 说明 | 前端行为 | 后端 | 业务处理 |
| :----: | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| 系统 | 成功 | SUCCESS | 0 |  |  自定义 | | N |
| 系统 | 繁忙 | BUSY | -1 | 系统异常 | ? | | N |
| 系统 | 失败 | FAIL | 1 | 各种错误原因 | 联系客服| | N |
| 系统 | lock失败 | LOCK_FAIL | 2 | 资源锁定失败 | 系统繁忙，重新操作| | N |
| 系统 | 操作频繁 | OPERATION_FAST | 3 | 操作太快了，在指定时间内(默认1秒)重复提交 | | | Y |
| 业务-通用 | 验证码错误 | CAPTCHA_ERROR | 300 |  | 自定义 | | Y |
| 业务-通用 | 验证码发送频繁 | CAPTCHA_SEND_FAST | 301 |  | 自定义 | | Y |
| 业务-通用 | 地址解析错误 | ADDRESS_PARSE_ERROR | 302 |  | |  | Y |
| 业务-接口 | 数据不存在 | NOT_EXIST | 400 | 管理系统使用，RUD | 自定义 |  | Y |
| 业务-接口 | 数据已存在 | EXIST | 401 | 管理系统使用，CREATE | 自定义 |  | Y |
| 业务-接口 | 参数错误 | PARAM_ERROR | 410 | 比其他错误多一个错误参数编码(field) | ? | 错误参数编码(如bankCard)，message(如为空/超过范围) | Y |
| 业务-接口 | 接口废弃 | DEPRECATED | 411 | 使用annotation实现 | 需升级app | | N |
| 业务-接口 | 已完成 | FINISHED | 412 |  请求已完成，属于重复提交。先lock，再判断重复。| 已完成 |  | Y |
| 业务-账户 | 登录失败 | LOGIN_FAIL | 500 |  | 自定义 |  | Y |
| 业务-账户 | 需登录 | NEED_LOGIN | 501 |  | 自定义 |  | N |
| 业务-账户 | 账户冻结 | ACCOUNT_FROZEN | 503 | |  冻结警告 | 提供自定义提示信息 | Y |
| 业务-账户 | 账号警告 | ACCOUNT_WARNING | 506 |  | 多次登录失败警告 | 提供自定义提示信息 | Y |
| 业务-账户 | 手机号已使用 | MOBILE_USED | 507 |  | 自定义 |  | Y |
| 业务-电商 | 没有地址 | NO_ADDRESS | 2001 |  | |  | Y |

# 设计
* 允许商家/个人提供各种服务
* 每个服务由独立系统提供，即服务工单由每个服务系统自行管理，统一汇总到服务平台
* 物流服务需要提供物理点位，参见[社区物流服务](../logistics/design.html)
* 服务平台独立于商城系统，也独立于物流服务系统

## 术语
| 名词 | 说明 |
| :----: | ---- |
| 服务 | 是种商品（如送货服务），但无法在标准商城销售 |
| 服务工单 | 是服务提供的记录，记录了过程和结果 |
| 非工单服务 | 无后续服务的(无服务工单) |
| 工单服务 | 有后续服务的(有服务工单) |

# 方案
## 服务提供
* 服务员分个人和企业
* 服务启用的两种方式：设置，可提前设置。开app就是提供服务

## 服务内容
| 服务项 | 收入 | 说明 |
| :----: | ---- | ---- |
| 用户推广服务 | 用户注册佣金 | 链接上有服务员号 |
| 商品推广服务 | 交易佣金 | 链接上有服务员号 |
| 第三方商品推广服务 | 交易佣金 | 链接到第三方系统购买。需要第三方系统支持商户号和自定义字段(存放服务员号) |
| 物流服务 | 服务收入 | 如自提，送货。在商家发货环节创建 |
| 其他定制服务 | 服务收入 | 需对接到定制服务系统，含服务和服务员 |

## 工单服务模式
### 服务员选择
实例1：滴滴抢单
1. 乘客先发起需求单
1. 司机抢单后产生订单(金额由抢单决定)，同时生成服务工单

### 服务员随机
实例1：滴滴派单
1. 乘客先发起需求单
1. 平台产生订单，同时生成服务工单(派单)

实例2：电商物流
1. 用户选择送货
1. 用户付款物流费(或者平台补贴)
1. 商家发货，创建服务工单(物流单)
1. 平台分配服务工单给某位服务员

## 收入构成
收入：工作收入 + 奖金 - 撤销工作的收入 - 撤销工作的奖金
* 收入来自于服务工单
* 撤销工作的定义：如用户购买，然后退货
* 撤销工作影响已发奖金：如上月按照5K档已经发放奖金，本月撤销工作后没达到5K档，奖金重新计算，差额下月减。

# 流程
## 服务员申请
1. 申请流程和材料
1. 审核

## 工单服务
1. 购买服务商品(下订单)，生成服务工单
1. 服务工单分配（两种）：派单(自动)，抢单
1. 服务工单执行和反馈

## 服务商户
### 业务
1. 服务商户在服务员管理系统搜索普通用户，完善服务员的信息，此惠民服务员被动的和服务商户绑定，服务商户可以修改惠民服务员信息
2. 服务员选择支付时增加一种支付方式，服务商户支付；
3. 退货，服务员在app上退货，由服务商户发货退回商家，支付退货费用
4. 机构周期性付钱给平台

### 设计
#### 服务商户
1. 服务商户由后台分配账号
2. 服务商户下有分支机构，分支机构中员工并提供服务

#### 分支机构
1. 服务商户可以申请分支机购
2. 分支机构可以编辑，当分支机构中没有员工时可删除
3. 分支机构可以选择智橙生活的用户为员工，被选择的用户不能是惠民服务员

#### 员工
1. 所有的员工都是惠民服务员
2. 服务员分负责人和普通员工，负责人和普通员工都可以有多个
3. 成为员工是被动的，即分支机构生成员工
4. 员工不能修改自己的信息
5. 员工所有的服务项目和服务时间由分支机构决定的
6. 员工可以被分支机构删除，这时员工必须是没有服务工单或者所有的服务工单完成的状态，这时员工的状态为离职状态，员工信息全部保留
7. 服务商户可以修改员工的分支机构，修改后的员工以前所有的信息全部保留

#### 服务商户支付
1. 每个服务商户都有自己的服务商户支付
2. 支付完成后，订单的状态为支付完成

#### 认领工单
1. 生成服务工单后，后台自动选择合适的员工去认领

#### 退货
1. 用户退货给员工，员工退货给商家，服务商户支付退货用户
2. 退货为正常流程

#### 员工工单记录
1. 员工完成服务工单后，会生成员工工单记录
2. 机构根据工单记录给员工工资

#### 结账
1. 智橙平台按月生成服务商户支付的账单
2. 服务商户根据账单支付给智橙平台

### 个人服务商户
 1.用户自己成为惠民服务员，那他就是个人商户
 2. 个人商户的分支机构，即是惠民服务员的地址，负责人也是自己
 3. 个人服务商户没有服务商户支付方式

## 物流服务工单

### 设计
1. 物流中转站中记录门店的信息已经他所有的功能
2. 当有物流服务工单生成后，首先去物流中转站中寻找合适的门店，然后在门店中选择合适的员工，再加工单分配给他
3. 服务工单在服务平台生成


# 参考
1. 到位
1. 蜂鸟

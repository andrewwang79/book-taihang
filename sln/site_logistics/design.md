# 设计
1. 每个供应商都可加入物流体系，需提供物流站点
1. 物流服务有：自提，配送(送货)
1. 物流服务到点位后，再分配到供应商的服务员[两种分配模式](/dev/sys/serv/design.html#工单服务模式)
1. 对上游有服务记录和收款清单，对下游有服务记录和付款清单

# 方案
## 关系
3个角色：加盟商，末端物流服务，商城

* 2和3：3创建服务，2反馈服务结果。2提供结算数据，3付款。
* 1和2：2发起服务，1提供服务。2提供结算数据，2付款。

## 物流单和配送单区别
* 物流单：关联所有服务。记录包裹情况和类型
* 配送单：只关联送货服务。记录配送信息，如who，when

## 线下营销活动
创建临时点位（供应商是活动组织公司），下单到临时点位，自提取货

# 流程
## 整体流程
1. 服务创建
1. 服务
1. 服务完成

## 服务创建
1. 服务调用方(如商城)发起服务需求，创建物流单
1. 如是送货的，则需创建配送单(还是收货时创建？)

## 服务完成后的操作
1. 通知服务调用方(如商城)完成情况
1. 计算服务员收入(也可以周期性计算)

## 服务(从收货开始)
```graphLR
    transporting[1送往站点中-S确认收货]
    at_store{"2到达站点"}
    wait_delivery(3等待送货-S送货)
    in_delivery(4送货中-S送货完成)
    delivery(5送货完成)
    wait_pick["6自提中-S自提(提货码)"]
    picked(7自提完成)

    transporting -->|"服务员收货"| at_store
    at_store -->|"系统审核-送货模式"|wait_delivery
    at_store -->|"系统审核-自提模式"|wait_pick
    wait_delivery -->|"送货"| in_delivery
    in_delivery -->|送货完成| delivery
    wait_pick -->|买家提供提货码| picked
```

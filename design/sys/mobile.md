# 起始页面
ios的预置第一页就是欢迎页

| 类型        | 说明   |  内容  |  数量  |
| --------   | ----- | -----  | ----  |
| 引导页     | 安装后显示一次 |   功能介绍     |  2-3 |
| 欢迎页     |   每次显示   | 产品简介，文字类或者一个简单图片   |  1 |
| 广告页     |    广告需求才显示    |    | 0-1  |

# 页面行为和流程
重点是后退

## 页面行为
* 产品页面

| 类型        | 底栏按钮 |  后退按钮 |
| --------   | ----- | -----  |
| 根页面     | 有 |  无 |
| 其他页面   |   无   | 有  |
深层次的页面，可配置返回到业务首页，或者首页

* 第三方应用页面(页面或者iframe)

| 类型      | 设备   | 底部按钮 |  后退按钮  |  退出按钮(第三方应用)  |
| --------   | --------   | ----- | -----  | ----  |
| 根页面     | Android |   无   | 无  |  有 |
| 其他页面   | Android  |   无   | 无  |  有（点击后回应用首页） |
| 根页面     | iOS     |   无   | 有  |  无 |
| 其他页面   | iOS  |   无   | 有  |  有（点击后回应用首页） |

## 页面配置

| 配置    | 类型 |  说明 |
| --------   | ----- | -----  |
| 根页面     | bool |   |
| 预置的后退页面   |  string   |   |
| 保留状态   |  bool   | 当前页面所处位置记忆  |

## 后退
### 说明
1. 浏览器的后退是无法控制，所以我们要能获悉它的后退。
1. 获悉方法：通过自己创建的页面堆栈来辅助。如当前render页面是堆栈最后一个，就是后退。如果是ABA（B跳转到A），无法判断是后退还是跳转你。

### 设计
1. 后退发起的页面会自动从url列表清除
1. 跳转到的页面，是需要不支持后退，底层支持情况如下：
  1. app可控制后退（含内置浏览器），达到要求
  1. 浏览器或者微信浏览器无法控制后退，不行

### 流程
```java
if (有预置的后退页面)
    后退到预置的后退页面
else
    后退到上个页面
```

# 页面状态记忆
需要记忆的页面：重点页面，列表页

模块(列表)容器记忆的方案(另外方案是记录可允许记忆的最大容器数量)：
1. 每个模块板块都有容器列表
1. 容器输入参数：是否清除记忆
1. 容器定义参数：功能板块名称，容器名称，记忆方式（永久，临时，不记忆）
1. 明细页：记录变量“是否清除记忆”（如果来源页是其对应的列表页，则是true），变量作为参数传递到下个页面
1. 处理流程(render)：
```java
赋值当前功能板块
if (是否清除记忆)
    删除当前容器的记忆
遍历容器列表
    if (容器.记忆方式 == 临时)
        if (容器.功能板块名称 != 当前功能板块)
            删除容器的记忆
继续 render
if (容器.记忆方式 != 不记忆)
    记忆当前容器
```
